#ifndef __ATTACKS_H__
#define __ATTACKS_H__

//This entire file is a single constant called RAYS
//Use to speed up a bunch in the SquareAttackedBy function
//Indexing: 0x77 + tgt - src
//The rules:
//if it's 0, then there CANNOT be a relation.
//&3 = direction (there are 2 of each for the queen tho)
//&4 = white pawn (don't mix up the directions!)
//&8 = black pawn
//&16 = king
//&32 = horsey
//&64 = bishop/queen
//&128 = rook/queen
const unsigned char RAYS[] = {
	  66,   0,   0,   0,   0,   0,   0, 129,   0,   0,   0,   0,   0,   0,  64,   0,
	   0,  66,   0,   0,   0,   0,   0, 129,   0,   0,   0,   0,   0,  64,   0,   0,
	   0,   0,  66,   0,   0,   0,   0, 129,   0,   0,   0,   0,  64,   0,   0,   0,
	   0,   0,   0,  66,   0,   0,   0, 129,   0,   0,   0,  64,   0,   0,   0,   0,
	   0,   0,   0,   0,  66,   0,   0, 129,   0,   0,  64,   0,   0,   0,   0,   0,
	   0,   0,   0,   0,   0,  66,  32, 129,  32,  64,   0,   0,   0,   0,   0,   0,
	   0,   0,   0,   0,   0,  32,  86, 145,  84,  32,   0,   0,   0,   0,   0,   0,
	 128, 128, 128, 128, 128, 128, 144,   0, 146, 130, 130, 130, 130, 130, 130,   0,
	   0,   0,   0,   0,   0,  32,  89, 147,  91,  32,   0,   0,   0,   0,   0,   0,
	   0,   0,   0,   0,   0,  65,  32, 131,  32,  67,   0,   0,   0,   0,   0,   0,
	   0,   0,   0,   0,  65,   0,   0, 131,   0,   0,  67,   0,   0,   0,   0,   0,
	   0,   0,   0,  65,   0,   0,   0, 131,   0,   0,   0,  67,   0,   0,   0,   0,
	   0,   0,  65,   0,   0,   0,   0, 131,   0,   0,   0,   0,  67,   0,   0,   0,
	   0,  65,   0,   0,   0,   0,   0, 131,   0,   0,   0,   0,   0,  67,   0,   0,
	  65,   0,   0,   0,   0,   0,   0, 131,   0,   0,   0,   0,   0,   0,  67,
};

//The offset you have to search for ALL the rays! (don't care about horses, those jump over pieces anyways)
const char RAY_OFFSETS[] = {
	 17,  0,  0,  0,  0,  0,  0, 16,  0,  0,  0,  0,  0,  0, 15,  0,  
	  0, 17,  0,  0,  0,  0,  0, 16,  0,  0,  0,  0,  0, 15,  0,  0, 
	  0,  0, 17,  0,  0,  0,  0, 16,  0,  0,  0,  0, 15,  0,  0,  0, 
	  0,  0,  0, 17,  0,  0,  0, 16,  0,  0,  0, 15,  0,  0,  0,  0, 
	  0,  0,  0,  0, 17,  0,  0, 16,  0,  0, 15,  0,  0,  0,  0,  0, 
	  0,  0,  0,  0,  0, 17,  0, 16,  0, 15,  0,  0,  0,  0,  0,  0, 
	  0,  0,  0,  0,  0,  0, 17, 16, 15,  0,  0,  0,  0,  0,  0,  0, 
	  1,  1,  1,  1,  1,  1,  1,  0, -1, -1, -1, -1, -1, -1, -1,  0, 
	  0,  0,  0,  0,  0,  0,-15,-16,-17,  0,  0,  0,  0,  0,  0,  0,
	  0,  0,  0,  0,  0,-15,  0,-16,  0,-17,  0,  0,  0,  0,  0,  0, 
	  0,  0,  0,  0,-15,  0,  0,-16,  0,  0,-17,  0,  0,  0,  0,  0, 
	  0,  0,  0,-15,  0,  0,  0,-16,  0,  0,  0,-17,  0,  0,  0,  0, 
	  0,  0,-15,  0,  0,  0,  0,-16,  0,  0,  0,  0,-17,  0,  0,  0,
	  0,-15,  0,  0,  0,  0,  0,-16,  0,  0,  0,  0,  0,-17,  0,  0,
	-15,  0,  0,  0,  0,  0,  0,-16,  0,  0,  0,  0,  0,  0,-17,
};

//All the masks explicited above
const unsigned char RAYMSK[] = {
	0, 4, 8, 0x20, 0x10, 0x40, 0x80, 0xC0, //queen = rook + bishop
};

#endif
